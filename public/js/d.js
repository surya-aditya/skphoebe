(()=>{var J=16.666666666666668,B=0,N=0;class z{constructor(){this.bm=[],this.pause=0,i(this,["v"]),document.addEventListener("visibilitychange",this.v)}add(t){this.bm.push(t)}v(){let t=performance.now(),e=document.visibilityState==="visible",o=e?"start":"stop",s;if(!e)this.pause=t;else s=t-this.pause;this.bm.forEach((r)=>r[o](s))}}var V=new z;class I{constructor(){this.bm=[],this.play=!0,i(this,["loop","off","on"]),V.add({stop:this.off,start:this.on}),this.raf()}off(){this.play=!1}on(t){this.bm.forEach((e)=>e.sT+=t),this.play=!0}a(t){this.bm.push(t)}r(t){this.bm=this.bm.filter((e)=>e.id!==t)}loop(t){if(this.play)this.t=this.t||t,B=(t-this.t)/J,this.t=t,this.bm.forEach((e)=>{if(f(e)&&(e.sT||(e.sT=t))){let o=t-e.sT;e.cb(o)}});this.raf()}raf(){requestAnimationFrame(this.loop)}}var P=new I;class a{constructor(t){this.cb=t,this.on=!1,this.id=N,N++}run(){if(!this.on)P.a({id:this.id,cb:this.cb,sT:performance.now()}),this.on=!0}stop(){if(this.on)P.r(this.id),this.on=!1}}function Y(t,e,o){return C(0,1,(o-t)/(e-t))}function K(t,e,o){return(1-o)*t+o*e}function C(t,e,o){return o<t?t:o>e?e:o}function X(t,e){return e=d(e)?100:10**e,Math.round(t*e)/e}function nt(t,e,o,s,r){return K(o,s,Y(t,e,r))}function ct(t,e){return Math.sqrt(t*t+e*e)}class k{constructor(t,e){this.cb=t,this.de=e,i(this,["loop"]),this.a7=new a(this.loop)}run(){this.de===0?this.cb():this.a7.run()}stop(){this.a7.stop()}loop(t){let e=C(0,this.de,t);if(C(0,1,e/this.de)===1)this.stop(),this.cb()}}class D{constructor(t){this.bm=new k(t.cb,t.de)}run(){this.bm.stop(),this.bm.run()}}var Q={ra:(t,e,o=0)=>{let s=Math.random()*(e-t)+t;return Q.round(s,o)},uni:(t)=>{let e=Array.from({length:t},(o,s)=>s);for(let o=t-1;o>0;o--){let s=Math.floor(Math.random()*(o+1)),r=e[o];e[o]=e[s],e[s]=r}return e},ro:(t,e)=>{let o=Math.pow(10,e);return Math.round(t*o)/o}};var lt=(t,e)=>t.style.opacity=e,g=(t)=>{if(t.cancelable)t.preventDefault()};var h=(t)=>document.createElement(t);var F=(t,e)=>t.style.pointerEvents=e,ut={a:(t)=>F(t,"all"),n:(t)=>F(t,"none")},pt=(t)=>t.getBoundingClientRect();var H={uA:navigator.userAgent.toLowerCase(),get iPadIOS13(){return navigator.platform==="MacIntel"&&1<navigator.maxTouchPoints},get isMobile(){return/mobi|android|tablet|ipad|iphone/.test(this.uA)||this.iPadIOS13},get isFF(){return-1<this.uA.indexOf("firefox")}},p={id:(t,e=document)=>e.getElementById(t),cl:(t,e=document)=>{let o=e.getElementsByClassName(t);return Array.from(o).filter((s)=>s instanceof HTMLElement)},tag:(t,e=document)=>{let o=e.getElementsByTagName(t);return Array.from(o).filter((s)=>s instanceof HTMLElement)}},ft=(t,e=document)=>e.querySelector(t);var mt=(t,e)=>t.getAttribute(e),dt=(t,e,o)=>t.setAttribute(e,o),gt={co:(t,e)=>t.classList.contains(e),a:(t,e)=>t.classList.add(e),r:(t,e)=>t.classList.remove(e)},Z=(t)=>typeof t==="string";var f=(t)=>t!==void 0,d=(t)=>t===void 0,O={el:(t)=>{let e=[];if(Z(t)){let o=t.charAt(0),s=t.substring(1);if(o==="#")e[0]=p.id(s);else if(o===".")e.push(...p.cl(s))}else e[0]=t;return e},type:(t)=>t.charAt(0)==="#"?"id":"class",name:(t)=>t.substring(1)};function j(t,e){if(Array.isArray(e))return e.some((o)=>Object.prototype.hasOwnProperty.call(t,o));return Object.prototype.hasOwnProperty.call(t,e)}function i(t,e){let o=e.length;for(let s=0;s<o;s++){let r=e[s];t[r]=t[r].bind(t)}}var G=(t)=>{let e=t.type,o=e==="html",s=o?"text":"json",r={method:o?"GET":"POST",mode:"same-origin"};if(e!=="data")r.headers=new Headers({"Content-type":e==="json"?"application/x-www-form-urlencoded":"text/html"});if(!o)r.body=t.body;if(f(t.signal))r.signal=t.signal;fetch(t.url,r).then((n)=>{if(n.ok)return n[s]();else if(t.error)t.error()}).then((n)=>{t.success(n)}).catch((n)=>{if(t.error)t.error()})},c=(t,e,o,s,r=!1)=>{let n=O.el(t),u=n.length,_=`${e==="a"?"add":"remove"}EventListener`,W=["mousemove","mousewheel","touchmove","touchstart"].includes(o)?{passive:!1}:void 0;for(let E=0;E<u;E++){let L=n[E];if(L&&typeof L[_]==="function")L[_](o,s,r?W:void 0)}};var $=(t)=>{return t.endsWith("/")?t.slice(0,-1):t};class b{constructor(t){this.col=t[0],this.inDom=!1;let e=document;if(i(this,["key"]),c(e,"a","keydown",this.key),f(t[1])){let o=h("div");o.id="g-cta",e.body.prepend(o),i(this,["cta"]),c(o,"a","click",this.cta)}}cta(){this.c({esc:!1,index:0})}key(t){if(_A.isM)return;if(t.code==="Escape"&&this.inDom)this.c({esc:!0});else if(t.code==="KeyG"&&t.shiftKey)this.c({esc:!1})}c(t){if(this.inDom)if(t.esc||this.g.className==="o")this.r();else this.g.className="o";else this.a()}r(){this.g.parentNode.removeChild(this.g),this.inDom=!1}a(){this.g=h("div"),this.g.id="g_";var t=h("div");t.id="g";for(let o=0;o<this.col;o++){var e=h("div");t.appendChild(e)}this.g.appendChild(t),document.body.prepend(this.g),this.inDom=!0}}class m{constructor(){this.eT=H.isMobile?"orientationchange":"resize",this.tick=!1,this.bm=[],i(this,["fn","loop","run"]),this.t=new D({de:40,cb:this.loop}),this.rafr=new a(this.run),c(window,"a",this.eT,this.fn)}add(t){this.bm.push(t)}rm(t){let e=this.bm.findIndex((o)=>o.id===t);if(e!==-1)this.bm.splice(e,1)}fn(t){this.e=t,this.t.run()}loop(){if(!this.tick)this.tick=!0,this.rafr.run()}run(){this.bm.forEach((t)=>t.cb(this.e)),this.rafr.stop(),this.tick=!1}}var U=0;class l{constructor(t){this.cb=t,this.id=U,U++}on(){new m().add({id:this.id,cb:this.cb})}off(){new m().rm(this.id)}}class x{constructor(t){this.cb=t.cb,this.el=j(t,"el")?O.el(t.el)[0]:document,i(this,["run"])}on(){this.l("a")}off(){this.l("r")}l(t){c(this.el,t,"pointermove",this.run)}run(t){this.cb(t.pageX,t.pageY,t)}}class w{constructor(){this.bm=[-1,-1],i(this,["move"]),this.mm=new x({cb:this.move})}move(t,e){this.bm=[t,e]}run(){this.mm.on()}}function tt(t){let e=p.cl("p"+(t||""));return e[e.length-1]}class y{constructor(){i(this,["resize","loop"]),this.raf=new a(this.loop),this.p=tt,this.c=new w}intro(){}init(){this.loop()}resize(){}run(){new l(this.resize).on(),this.raf.run(),this.c.run()}on(){}off(){}loop(){}}class R{constructor(t){t(()=>{this.cb()})}cb(){let e=_A.e;e.intro(),e.init(),e.run()}}class A{constructor(){this.fx=new FxMutation}out(){let t=_A,e=t.route.new.url,o=t.rgl;t.e.off(),this.fx.out({cb:()=>t.page.update()})}in(){let t=_A,e=t.rgl,o=t.e,s=t.route.new.url;t.page.q$(),t.page.s1(),this.fx.in()}}class M{constructor(){this.inj=!1,i(this,["resize"]),new l(this.resize).on(),this.resize()}resize(){let t=_A.winRatio.wh>1;if(t&&!this.inj)this.a();else if(!t&&this.inj)this.r()}a(){let t=document.body;this.ro=h("div"),this.ro.className="ro_";let e=h("div");e.className="ro",e.innerHTML="Rotate your device",this.ro.appendChild(e),t.prepend(this.ro),this.inj=!0}r(){this.ro.parentNode.removeChild(this.ro),this.inj=!1}}class T{constructor(t){this.d=t;let e=_A;e.win={w:0,h:0},e.config.dim={d:[1440,900],m:[393,856]},i(this,["resize"]),new l(this.resize).on(),this.resize()}resize(){let t=_A,e=innerWidth,o=innerHeight;t.win={w:e,h:o},t.winSemi={w:0.5*e,h:0.5*o},t.winRatio={wh:e/o,hw:o/e},t.isLandscape=1<t.winRatio.wh,t.format=t.isLandscape?"l":"p";let s=t.config.dim[this.d];t.dim={h:s[1],w:s[0]},t.winWSF=e/t.dim.w,t.winHSF=o/t.dim.h}}function q(t){let e=_A,o=e.config.routes[t],s=e.route.new,r=e.route.old;if(e.route.old=s,e.route.new={url:t,page:o},e.is[s.page]=!1,e.is[o]=!0,r.page)e.was[r.page]=!1;e.was[s.page]=!0}class v{constructor(t){let e=_A,o=t[0],s=t[1],r=t[2],n=t[3];if(e.intro=!0,e.mutating=!1,e.page={},this.M9=r,this.isD=o,this.d=o?"d":"m",i(this,["eD"]),new T(this.d),this.d==="m")new M;e.e=new s,this.Yt(),c(document,"a","click",this.eD),new n((u)=>this.intro(u))}Yt(){let t=document.readyState!=="complete";onload=()=>setTimeout(()=>t=!1,0),onpopstate=(e)=>{if(t&&document.readyState==="complete")g(e),e.stopImmediatePropagation();let o=_A;if(!d(o.config.routes))if(o.mutating)this.gv();else o.mutating=!0,this.out($(location.pathname),"back")}}eD(t){let e=_A,o=t.target,s=!1,r=!1;while(o){let n=o.tagName;if(n==="A"){s=!0;break}if((n==="INPUT"||n==="BUTTON")&&o.type==="submit"){r=!0;break}o=o.parentNode}if(s){let n=o.href,u=new URL(n).protocol;if(!o.hasAttribute("target")&&u!=="mailto:"&&u!=="tel:"){if(g(t),!e.mutating){let S=n.replace(/^.*\/\/[^/]+/,"");if(S===e.route.new.url)return;e.mutating=!0,this.out(S,o)}}}else if(r)g(t)}intro(t){let e=_A,o=e.route.new.url;G({url:o+"?device="+this.d,type:"html",success:(s)=>{let r=JSON.parse(s);e.config.routes=r.routes,e.data=r.data,this.cache=r.cache,this.add(document.body,"afterbegin",r.body),this.bm=p.id("_");let n=o;this.add(this.bm,"beforeend",this.cache[n].html),this.M9=new this.M9,t()}})}out(t,e){q(t);let o=_A;o.target=e,o.S8=e==="back",o.page.update=()=>{this.in()},this.M9.out()}in(){let t=_A,e=t.route,o=this.cache[e.new.url];if(document.title=o.title,t.target!=="back")this.gv();t.page.q$=()=>{this.add(this.bm,"beforeend",o.html)},t.page.s1=()=>{let s=this.bm.children[0];s.parentNode.removeChild(s)},this.M9.in()}add(t,e,o){t.insertAdjacentHTML(e,o)}gv(){let e=_A.route.new.url;history.pushState({page:e},"",e)}}new b([12,!0]);new v([!0,y,A,R]);})();

//# debugId=DFBF89A6DDDCCD8E64756E2164756E21
//# sourceMappingURL=d.js.map
